<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>â˜ªï¸åœ‹ä¸­å¿…å‚™2000å–®å­—(Ëƒá†ºË‚)</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<style>
:root {
    --bg-main: #f7f8fb;
    --card-bg: #ffffff;
    --primary: #c7a3b1;
    --primary-soft: #f2e9ee;
    --accent: #b6c4d9;
    --text-main: #444;
    --text-soft: #777;
}

body {
    margin: 0;
    padding: 18px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: linear-gradient(180deg, #f8f9fc, #f1f3f8);
    color: var(--text-main);
}

.card {
    max-width: 480px;
    margin: auto;
    background: var(--card-bg);
    border-radius: 28px;
    padding: 20px;
    box-shadow:
        0 20px 40px rgba(0,0,0,0.06),
        0 4px 12px rgba(0,0,0,0.04);
}

h2, h3 {
    text-align: center;
    color: #8b6f7a;
    margin: 8px 0 12px;
    font-weight: 600;
}

.meaning {
    font-size: 26px;
    text-align: center;
    margin: 22px 0;
    letter-spacing: 1px;
}

.progress-bar {
    height: 12px;
    background: var(--primary-soft);
    border-radius: 8px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #d4b1bf, #b8c6dd);
    width: 0%;
    transition: width 0.3s ease;
}

#progressText {
    text-align: center;
    font-size: 13px;
    margin-top: 6px;
    color: var(--text-soft);
}

input {
    width: 100%;
    padding: 14px;
    font-size: 20px;
    border-radius: 18px;
    border: 1.5px solid #e6e6e6;
    box-sizing: border-box;
    outline: none;
}

input:focus {
    border-color: #cbb3bf;
    background: #fcfafb;
}

button {
    width: 100%;
    padding: 14px;
    margin-top: 12px;
    font-size: 18px;
    border-radius: 18px;
    border: none;
    background: linear-gradient(180deg, #d7b9c6, #c3a6b2);
    color: white;
    font-weight: 600;
    letter-spacing: 1px;
}

button.choice {
    background: linear-gradient(180deg, #cfd8e8, #b8c4db);
    color: #333;
}

button:active {
    transform: scale(0.98);
}

ul {
    text-align: left;
    padding-left: 20px;
    line-height: 1.8;
}

#preview li {
    margin-bottom: 6px;
}
</style>
</head>

<body>
<div class="card">
<h2>â˜ªï¸åœ‹ä¸­å¿…å‚™2000å–®å­—(Ëƒá†ºË‚)</h2>

<!-- â­ ä»Šæ—¥å–®å­—é ç¿’å€ï¼ˆç©©å®šç‰ˆï¼‰ -->
<div id="preview" style="display:none;">
  <p style="text-align:center;">ğŸ“– ä»Šå¤©æœƒè€ƒé€™äº›å–®å­—ï¼Œå…ˆèƒŒå®Œå†é–‹å§‹</p>
  <ul id="previewList"></ul>
  <button onclick="startTest()">æˆ‘èƒŒå®Œäº†ï¼Œé–‹å§‹è€ƒè©¦</button>
</div>

<!-- â­ è€ƒè©¦å€ -->
<div id="exam">
  <div class="progress-bar">
    <div class="progress-fill" id="bar"></div>
  </div>
  <div id="progressText"></div>

  <div class="meaning" id="meaning"></div>
  <input id="answer" placeholder="è«‹è¼¸å…¥è‹±æ–‡">
  <div id="choiceArea"></div>

  <button onclick="check()">ç¢ºèª</button>
  <button onclick="speak()">ğŸ”Š å†è½ä¸€æ¬¡</button>

  <div id="result"></div>
</div>

</div>

<script>
/* ===== å–®å­—è³‡æ–™ï¼ˆç¤ºä¾‹ï¼Œå¯è‡ªè¡Œæ›æˆ2000å­—ï¼‰ ===== */
const rawData = `
apple,è˜‹æœ
banana,é¦™è•‰
book,æ›¸
computer,é›»è…¦
future,æœªä¾†
`;

/* ===== åŸºæœ¬è¨­å®š ===== */
const DAILY = 40;
let words = rawData.trim().split("\n").map(l=>{
  const p=l.split(",");
  return {word:p[0], meaning:p[1]};
});
shuffle(words);

let pool = words.slice(0, DAILY);
let wrongList = [];
let index = 0;

/* ===== é ç¿’æ¸…å–® ===== */
function showPreview() {
  document.getElementById("preview").style.display = "block";
  document.getElementById("exam").style.display = "none";

  const ul = document.getElementById("previewList");
  ul.innerHTML = "";

  pool.forEach(w => {
    const li = document.createElement("li");
    li.innerHTML = `
      <b>${w.word}</b> â€” ${w.meaning}
      <button onclick="previewSpeak('${w.word}')">ğŸ”Š</button>
    `;
    ul.appendChild(li);
  });
}

function startTest() {
  document.getElementById("preview").style.display = "none";
  document.getElementById("exam").style.display = "block";
  index = 0;
  show();
}

function previewSpeak(word) {
  const u = new SpeechSynthesisUtterance(word);
  u.lang = "en-US";
  u.rate = 0.75;
  speechSynthesis.speak(u);
}

/* ===== é¡¯ç¤ºé¡Œç›® ===== */
function show(){
  const w = pool[index];
  document.getElementById("meaning").innerText = w.meaning;
  document.getElementById("result").innerText = "";
  document.getElementById("choiceArea").innerHTML = "";
  document.getElementById("answer").value = "";

  updateProgress();

  if(index < 20){
    document.getElementById("answer").style.display = "block";
    speak();
  }else{
    document.getElementById("answer").style.display = "none";
    makeChoices(w);
  }
}

/* ===== ç™¼éŸ³ ===== */
function speak(){
  const u = new SpeechSynthesisUtterance(pool[index].word);
  u.lang = "en-US";
  u.rate = 0.75;
  speechSynthesis.speak(u);
}

/* ===== é¸æ“‡é¡Œ ===== */
function makeChoices(w){
  let opts = [w.word];
  while(opts.length < 4){
    let r = words[Math.floor(Math.random()*words.length)].word;
    if(!opts.includes(r)) opts.push(r);
  }
  shuffle(opts);
  opts.forEach(o=>{
    const b = document.createElement("button");
    b.className = "choice";
    b.innerText = o;
    b.onclick = ()=>submit(o);
    document.getElementById("choiceArea").appendChild(b);
  });
}

function submit(val){
  document.getElementById("answer").value = val;
  check();
}

/* ===== æª¢æŸ¥ ===== */
function check(){
  const w = pool[index];
  const input = document.getElementById("answer").value.toLowerCase();

  if(input === w.word.toLowerCase()){
    document.getElementById("result").innerText = "âœ… æ­£ç¢º";
    index++;
    setTimeout(show, 500);
  }else{
    document.getElementById("result").innerText = "âŒ éŒ¯äº†ï¼Œå†è©¦ä¸€æ¬¡";
    if(!wrongList.includes(w)) wrongList.push(w);
  }

  if(index >= pool.length){
    if(wrongList.length > 0){
      alert("ğŸ“Œ ä»¥ä¸‹æ˜¯ä»Šæ—¥éŒ¯çš„å–®å­—ï¼Œè«‹å…ˆèƒŒå®Œï¼");
      pool = [...wrongList];
      wrongList = [];
      index = 0;
      showPreview();
    }else{
      alert("ğŸ‰ ä»Šæ—¥å®Œæˆï¼");
    }
  }
}

/* ===== é€²åº¦ ===== */
function updateProgress(){
  document.getElementById("progressText").innerText =
    `ç¬¬ ${index+1} / ${pool.length} é¡Œ`;
  document.getElementById("bar").style.width =
    `${(index/pool.length)*100}%`;
}

function shuffle(a){a.sort(()=>Math.random()-0.5);}

/* ===== å•Ÿå‹•é»ï¼šä¸€å®šå…ˆé ç¿’ ===== */
showPreview();
</script>

</body>
</html>

